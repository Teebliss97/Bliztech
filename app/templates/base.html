<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  {# ---------- SEO defaults ---------- #}
  {% set seo_title = "BlizTech Cyber Awareness" %}
  {% set seo_description =
    "Learn practical cybersecurity awareness in minutes. Read a lesson, take a short quiz, and unlock the next topic — step by step."
  %}
  {% set seo_image = url_for('static', filename='img/og-bliztech.png', _external=True) %}
  {% set seo_url = request.base_url %}

  <title>{% block title %}BlizTech Cyber Awareness{% endblock %}</title>

  <!-- Basic SEO -->
  <meta name="description" content="{{ seo_description }}">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="{{ seo_url }}">

  <!-- OpenGraph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="BlizTech">
  <meta property="og:locale" content="en_GB">
  <meta property="og:title" content="{{ seo_title }}">
  <meta property="og:description" content="{{ seo_description }}">
  <meta property="og:url" content="{{ seo_url }}">
  <meta property="og:image" content="{{ seo_image }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ seo_title }}">
  <meta name="twitter:description" content="{{ seo_description }}">
  <meta name="twitter:image" content="{{ seo_image }}">

  <!-- Theme color -->
  <meta name="theme-color" content="#070c16">

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

  <!-- Google Analytics (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GYN6VFZ64E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-GYN6VFZ64E', {
      anonymize_ip: true
    });
  </script>
  <!-- End Google Analytics -->
</head>

<body>
  <!-- ===================== NAVBAR ===================== -->
  <header class="nav">
    <div class="container">

      <input type="checkbox" id="nav-check" />

      <div class="nav-inner">
        <!-- Brand -->
        <a class="brand" href="{{ url_for('main.home') }}">
          <img
            class="brand-logo"
            src="{{ url_for('static', filename='img/logo-mark.svg') }}"
            alt="BlizTech logo"
          >
          <span class="brand-name">BlizTech</span>
        </a>

        <div class="nav-right">
          <nav class="nav-links">
            <a href="{{ url_for('main.home') }}"
               class="{% if request.endpoint == 'main.home' %}active{% endif %}">
              Home
            </a>

            <a href="{{ url_for('topics.list_topics') }}"
               class="{% if request.endpoint and request.endpoint.startswith('topics.') %}active{% endif %}">
              Topics
            </a>
            <a href="{{ url_for('main.support') }}"
               class="{% if request.endpoint == 'main.support' %}active{% endif %}">
              Support
            </a>

            {% if current_user.is_authenticated %}
              <a href="{{ url_for('main.dashboard') }}"
                 class="{% if request.endpoint == 'main.dashboard' %}active{% endif %}">
                Dashboard
              </a>

              <a href="{{ url_for('cert.certificate_home') }}"
                 class="{% if request.endpoint and request.endpoint.startswith('cert.') %}active{% endif %}">
                Certificate
              </a>

              {% if current_user.is_admin %}
                <a href="{{ url_for('admin.dashboard') }}"
                   class="{% if request.endpoint and request.endpoint.startswith('admin.') %}active{% endif %}">
                  Admin
                </a>
              {% endif %}

              <span class="chip pill-dark">{{ current_user.email }}</span>
              <a class="btn btn-outline btn-sm" href="{{ url_for('auth.logout') }}">Logout</a>
            {% else %}
              <a href="{{ url_for('auth.login') }}"
                 class="{% if request.endpoint == 'auth.login' %}active{% endif %}">
                Login
              </a>
              <a class="btn btn-outline btn-sm" href="{{ url_for('auth.signup') }}">Sign up</a>
            {% endif %}
          </nav>

          <label class="nav-toggle" for="nav-check">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M4 7h16M4 12h16M4 17h16"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"/>
            </svg>
          </label>
        </div>
      </div>

      <div class="nav-panel">
        <div class="nav-panel-inner">
          <nav class="nav-panel-links">
            <a href="{{ url_for('main.home') }}">Home</a>
            <a href="{{ url_for('topics.list_topics') }}">Topics</a>
            <a href="{{ url_for('main.support') }}">Support</a>


            {% if current_user.is_authenticated %}
              <a href="{{ url_for('main.dashboard') }}">Dashboard</a>
              <a href="{{ url_for('cert.certificate_home') }}">Certificate</a>

              {% if current_user.is_admin %}
                <a href="{{ url_for('admin.dashboard') }}">Admin</a>
              {% endif %}

              <a class="btn btn-outline" href="{{ url_for('auth.logout') }}">Logout</a>
              <div class="chip pill-dark" style="margin-top:10px;">
                {{ current_user.email }}
              </div>
            {% else %}
              <a href="{{ url_for('auth.login') }}">Login</a>
              <a class="btn btn-outline" href="{{ url_for('auth.signup') }}">
                Create an account
              </a>
            {% endif %}
          </nav>
        </div>
      </div>

    </div>
  </header>

  <!-- ===================== MAIN CONTENT ===================== -->
  <main class="container">

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-wrap">
          {% for category, message in messages %}
            <div class="flash {{ category }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <!-- ===================== FOOTER ===================== -->
  <footer class="footer">
    <div class="container">
      <small>
        © {{ current_year }} BlizTech Cybersecurity Awareness •
        <a href="{{ url_for('main.support') }}" class="muted" style="text-decoration:underline;">Support BlizTech</a> •
        <span class="muted">Contact: Toheebatinuke@gmail.com</span>
      </small>
    </div>
  </footer>

</body>
</html>
