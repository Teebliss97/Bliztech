{% extends "base.html" %}

{% block content %}
  <section class="hero">
    <div class="hero-left">
      <div class="hero-pill">
        <span class="dot"></span>
        Cybersecurity Awareness â€¢ BlizTech
      </div>

      <h1 class="hero-title">Stay safe online â€” one topic at a time.</h1>
      <p class="hero-subtitle">
        Learn practical cybersecurity skills in minutes. Read a lesson, take a short quiz,
        and unlock the next topic â€” step by step.
      </p>

      {# ================================
         Logged-in "Welcome back" nudge
         ================================ #}
      {% if current_user.is_authenticated and progress %}
        <div class="continue-card pop-in">
          <div class="continue-top">
            <div>
              <div class="continue-title">Welcome back ðŸ‘‹</div>
              <div class="continue-sub">
                Youâ€™re <strong>{{ progress.percent }}%</strong> done â€” {{ progress.completed }}/{{ progress.total }} completed.
              </div>
            </div>
            <a class="btn btn-outline" href="{{ url_for('main.dashboard') }}">
              Open Dashboard
            </a>
          </div>

          <div class="bar">
            <div class="bar-fill" style="width: {{ progress.percent }}%;"></div>
          </div>

          <div class="continue-body" style="margin-top:10px;">
            {% if progress.course_done %}
              <p class="muted">ðŸŽ‰ Youâ€™ve completed the full course. Your certificate is ready.</p>
            {% elif progress.resume %}
              <p class="muted">
                Continue where you stopped: <strong>{{ progress.resume.title }}</strong>
              </p>
            {% elif progress.next_topic %}
              <p class="muted">
                Next step: <strong>{{ progress.next_topic.label }}</strong>
              </p>
            {% else %}
              <p class="muted">Start with Topic 1 and build your way up.</p>
            {% endif %}
          </div>

          <div class="hero-actions">
            {% if progress.course_done %}
              <a class="btn" href="{{ url_for('cert.certificate_home') }}">ðŸŽ“ Download Certificate</a>
              <a class="btn btn-outline" href="{{ url_for('topics.list_topics') }}">Review Topics</a>

            {% elif progress.resume %}
              <a class="btn" href="{{ url_for('topics.topic_detail', slug=progress.resume.slug) }}">
                â–¶ Continue where you stopped
              </a>
              <a class="btn btn-outline" href="{{ url_for('quizzes.quiz', slug=progress.resume.slug) }}">
                Take Quiz
              </a>

            {% elif progress.next_topic %}
              <a class="btn" href="{{ url_for('topics.topic_detail', slug=progress.next_topic.slug) }}">
                Continue: {{ progress.next_topic.label }}
              </a>
              <a class="btn btn-outline" href="{{ url_for('topics.list_topics') }}">See all topics</a>

            {% else %}
              <a class="btn" href="{{ url_for('topics.topic_detail', slug='topic1') }}">Start Topic 1</a>
              <a class="btn btn-outline" href="{{ url_for('topics.list_topics') }}">See all topics</a>
            {% endif %}
          </div>
        </div>

      {% else %}
        {# Logged-out users #}
        <div class="hero-actions">
          <a class="btn" href="{{ url_for('topics.list_topics') }}">Start Learning</a>
          <a class="btn btn-outline" href="{{ url_for('auth.signup') }}">Create free account</a>
        </div>

        <p class="muted" style="margin:10px 0 0; font-size:13px; line-height:1.6;">
          Create an account to track progress, unlock topics, and earn a certificate.
        </p>
      {% endif %}

      <div class="hero-stats">
        <div class="stat">
          <div class="stat-num">10</div>
          <div class="stat-label">Topics</div>
        </div>
        <div class="stat">
          <div class="stat-num">5</div>
          <div class="stat-label">Questions per quiz</div>
        </div>
        <div class="stat">
          <div class="stat-num">3â€“6 min</div>
          <div class="stat-label">Per lesson</div>
        </div>
      </div>
    </div>

    <div class="hero-right">
      <div class="hero-visual">
        <img class="hero-img"
          src="{{ url_for('static', filename='img/hero-bliztech.svg') }}"
          alt="BlizTech cybersecurity awareness hero"
        />
      </div>
    </div>
  </section>

  <section class="section-grid">
    <div class="feature">
      <div class="feature-icon">
        <img src="{{ url_for('static', filename='img/icon-lesson.svg') }}" alt="Lessons">
      </div>
      <h3>Simple lessons</h3>
      <p>No jargon. Just clear explanations and real examples.</p>
    </div>

    <div class="feature">
      <div class="feature-icon">
        <img src="{{ url_for('static', filename='img/icon-quiz.svg') }}" alt="Quizzes">
      </div>
      <h3>Quick quizzes</h3>
      <p>Test yourself after each topic and build confidence.</p>
    </div>

    <div class="feature">
      <div class="feature-icon">
        <img src="{{ url_for('static', filename='img/icon-unlock.svg') }}" alt="Progression">
      </div>
      <h3>Progression</h3>
      <p>Pass to unlock the next topic â€” learn in the right order.</p>
    </div>

    <div class="feature">
      <div class="feature-icon">
        <img src="{{ url_for('static', filename='img/icon-tips.svg') }}" alt="Practical tips">
      </div>
      <h3>Practical tips</h3>
      <p>Spot scams, protect accounts, and stay safer online.</p>
    </div>
  </section>

  <section class="how-card">
    <h2>How it works</h2>
    <ol>
      <li>Pick a topic (start from Topic 1)</li>
      <li>Read a short lesson (3â€“6 minutes)</li>
      <li>Take the quiz (5 questions)</li>
      <li>Pass to unlock the next topic</li>
    </ol>

    <div class="how-actions">
      <a class="btn" href="{{ url_for('topics.list_topics') }}">Start with topics</a>
      {% if current_user.is_authenticated %}
        <a class="btn btn-outline" href="{{ url_for('main.dashboard') }}">View progress</a>
      {% else %}
        <a class="btn btn-outline" href="{{ url_for('auth.signup') }}">Create free account</a>
      {% endif %}
    </div>
  </section>

  <section class="cta">
    <div class="cta-inner">
      <div>
        <h2>Ready to level up your online safety?</h2>
        <p>Start with Topic 1 and unlock your way through the course.</p>
      </div>
      <a class="btn" href="{{ url_for('topics.list_topics') }}">Start learning</a>
    </div>
  </section>
{% endblock %}
